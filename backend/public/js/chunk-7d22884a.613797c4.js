(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d22884a"],{"07d2":function(e,t,a){"use strict";var c;(function(o){if("function"!==typeof n){var n=function(e){return e};n.nonNative=!0}const s=n("plaintext"),r=n("html"),l=n("comment"),i=/<(\w*)>/g,b=/<\/?([^\s\/>]+)/;function d(e,t,a){e=e||"",t=t||[],a=a||"";let c=p(t,a);return f(e,c)}function u(e,t){e=e||[],t=t||"";let a=p(e,t);return function(e){return f(e||"",a)}}function p(e,t){return e=j(e),{allowable_tags:e,tag_replacement:t,state:s,tag_buffer:"",depth:0,in_quote_char:""}}function f(e,t){if("string"!=typeof e)throw new TypeError("'html' parameter must be a string");let a=t.allowable_tags,c=t.tag_replacement,o=t.state,n=t.tag_buffer,i=t.depth,b=t.in_quote_char,d="";for(let u=0,p=e.length;u<p;u++){let t=e[u];if(o===s)switch(t){case"<":o=r,n+=t;break;default:d+=t;break}else if(o===r)switch(t){case"<":if(b)break;i++;break;case">":if(b)break;if(i){i--;break}b="",o=s,n+=">",a.has(O(n))?d+=n:d+=c,n="";break;case'"':case"'":b=t===b?"":b||t,n+=t;break;case"-":"<!-"===n&&(o=l),n+=t;break;case" ":case"\n":if("<"===n){o=s,d+="< ",n="";break}n+=t;break;default:n+=t;break}else if(o===l)switch(t){case">":"--"==n.slice(-2)&&(o=s),n="";break;default:n+=t;break}}return t.state=o,t.tag_buffer=n,t.depth=i,t.in_quote_char=b,d}function j(e){let t=new Set;if("string"===typeof e){let a;while(a=i.exec(e))t.add(a[1])}else n.nonNative||"function"!==typeof e[n.iterator]?"function"===typeof e.forEach&&e.forEach(t.add,t):t=new Set(e);return t}function O(e){let t=b.exec(e);return t?t[1].toLowerCase():null}d.init_streaming_mode=u,c=function(){return d}.call(t,a,t,e),void 0===c||(e.exports=c)})()},"0c1a":function(e,t,a){"use strict";a.r(t);var c=a("7a23");a("14d9");const o={class:"card"},n={class:"card-header"},s={class:"card-title"},r={class:"card-body"},l={id:"example1",class:"table table-bordered table-striped"},i=["onClick"],b=["onChange"],d=["selected","value"],u={key:1,class:"cut-text"},p=["onClick"],f=Object(c["createElementVNode"])("i",{class:"fa-solid fa-file-pen"},null,-1);var j={__name:"BaseTable",props:{tableTitle:{type:String},tableHeaders:{type:Array},tableContent:{type:Array},postStatuses:{type:Array}},emits:["deletePost","changeStatus"],setup(e,{emit:t}){const j=e,O=a("07d2");return console.log(j),(a,g)=>{const m=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("h3",s,Object(c["toDisplayString"])(e.tableTitle),1)]),Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("table",l,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.tableHeaders,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",{key:t},Object(c["toDisplayString"])(e),1))),128))])]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.tableContent,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{onClick:Object(c["withModifiers"])(t=>a.$router.push({path:"/admin/post/"+e.id}),["stop"]),key:e.id,class:"box"},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e,(a,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",{key:o},["post_status_id"===o?(Object(c["openBlock"])(),Object(c["createElementBlock"])("select",{key:0,class:"form-control",onClick:g[0]||(g[0]=Object(c["withModifiers"])(()=>{},["stop"])),onChange:a=>t("changeStatus",{post_status_id:a.target.value,id:e.id})},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(j.postStatuses,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{selected:Number(e.id)===Number(a),key:e.id,value:e.id},Object(c["toDisplayString"])(e.name),9,d))),128))],40,b)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",u,Object(c["toDisplayString"])(Object(c["unref"])(O)(a)),1))]))),128)),Object(c["createElementVNode"])("i",{onClick:Object(c["withModifiers"])(a=>t("deletePost",e.id),["stop"]),class:"fa-solid fa-trash icon-transparent"},null,8,p),Object(c["createVNode"])(m,{onClick:g[1]||(g[1]=Object(c["withModifiers"])(()=>{},["stop"])),to:{path:"/admin/post/"+e.id}},{default:Object(c["withCtx"])(()=>[f]),_:2},1032,["to"])],8,i))),128))])])])])}}};a("731e");const O=j;var g=O,m=a("91ea"),h=a("be92");const k={class:"content-wrapper"},y={class:"content-header"},w={class:"container-fluid"},v={class:"my-4"},B={class:"row mb-2"},_=Object(c["createStaticVNode"])('<div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">DataTables</li></ol></div>',1);var E={__name:"index",async setup(e){let t,a;const o=Object(m["a"])();[t,a]=Object(c["withAsyncContext"])(()=>o.getPosts()),await t,a();const{posts:n}=Object(h["storeToRefs"])(o),s=([t,a]=Object(c["withAsyncContext"])(()=>o.getPostStatuses()),t=await t,a(),t);return(e,t)=>{const a=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",k,[Object(c["createElementVNode"])("section",y,[Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("div",v,[Object(c["createVNode"])(a,{to:"/admin/posts/create",class:"btn btn-success"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Создать ")]),_:1})]),Object(c["createElementVNode"])("div",B,[Object(c["createVNode"])(g,{onDeletePost:Object(c["unref"])(o).deletePost,onChangeStatus:Object(c["unref"])(o).changeStatus,"table-headers":Object(c["unref"])(o).tableHeaders,"table-content":Object(c["unref"])(n),"post-statuses":Object(c["unref"])(s)},null,8,["onDeletePost","onChangeStatus","table-headers","table-content","post-statuses"]),_])])])])}}};const S=E;t["default"]=S},"731e":function(e,t,a){"use strict";a("a01f")},"91ea":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a("14d9");var c=a("be92");const o=e=>{const t=new FormData;for(const[a,c]of Object.entries(e))t.append(a,c);return t};var n=a("7a23"),s=a("6605"),r=a("a3be"),l=a("4598"),i=a("cee4"),b=a("d9c4");const d=Object(c["defineStore"])("axiosStore",()=>{const e=Object(l["a"])(),t=Object(b["a"])(),a=()=>{let a;return a=i["a"].create(),a.interceptors.response.use(e=>e,async c=>{const o=c.config;if(403===c.response.status&&!o._retry){o._retry=!0;try{const e=await t.refresh();return o.headers.Authorization="Bearer "+e.accessToken,console.log(a(o)),a(o)}catch(c){console.log(c),await e.logout();const t=Object(s["d"])();await t.push("/"),e.showLoginPage()}}return Promise.reject(c)}),a};return{setConfigAxios:a}}),u=Object(c["defineStore"])("adminPostsStore",()=>{const e=Object(l["a"])(),t=d(),a=t.setConfigAxios(),c=Object(s["d"])();let i=Object(n["ref"])(null);const b=async e=>(console.log(e),null===i.value&&(i.value=await g()),i.value.find(t=>Number(t.id)===Number(e))),u="Редактирование статей",p=["id","name","description","image","icon","post_status_id","user_id","created_at","updated_at"],f=async()=>{const t=e.getAccessTokenStorage();try{const e=await a.get(`${r["g"]}/${r["b"]}`,{headers:{Authorization:"Bearer "+t}});if(200===e.status)return e.data}catch(c){console.log(c)}},j=async t=>{const c=e.getAccessTokenStorage();console.log(t);try{const e=await a.post(`${r["g"]}/${r["a"]}`,t,{headers:{Authorization:"Bearer "+c}});200===e.status&&console.log("Статус обновлен")}catch(o){console.log(o)}},O=async t=>{const n=e.getAccessTokenStorage(),s=o(t);try{const e=await a.post(`${r["g"]}/${r["c"]}`,s,{headers:{Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"}});200===e.status&&(console.log("Статья создана"),await c.push("/admin/posts"))}catch(l){console.log(l)}},g=async()=>{const t=e.getAccessTokenStorage();try{const e=await a.get(`${r["g"]}/${r["e"]}`,{headers:{Authorization:"Bearer "+t}});if(200===e.status)return i.value=e.data,e.data}catch(c){console.log(c)}},m=async t=>{const c=e.getAccessTokenStorage();console.log(t);try{const e=await a.delete(`${r["g"]}/${r["d"]}`,{data:{id:t},headers:{Authorization:"Bearer "+c}});200===e.status&&(console.log("Стаья удалена"),i.value=i.value.filter(e=>e.id!==t),console.log(i.value,"отфильтрованно"))}catch(o){console.log(o),console.log("Ошибка при удалении статьи")}};return{getPosts:g,tableHeaders:p,tableTitle:u,getByPostId:b,getPostStatuses:f,createOrUpdatePost:O,deletePost:m,posts:i,changeStatus:j}})},a01f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-7d22884a.613797c4.js.map