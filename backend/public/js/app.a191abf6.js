(function(e){function t(t){for(var n,a,l=t[0],s=t[1],i=t[2],u=0,d=[];u<l.length;u++)a=l[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);b&&b(t);while(d.length)d.shift()();return r.push.apply(r,i||[]),c()}function c(){for(var e,t=0;t<r.length;t++){for(var c=r[t],n=!0,a=1;a<c.length;a++){var l=c[a];0!==o[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=c[0]))}return e}var n={},a={app:0},o={app:0},r=[];function l(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-15e70942":"45ef2101","chunk-2d0c80c2":"df3a1e3d","chunk-2d0d6f02":"ceccc18a","chunk-2d20f8d6":"b60be681","chunk-8c79ba7e":"246f52cd","chunk-eb715188":"1448f003"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.e=function(e){var t=[],c={"chunk-15e70942":1,"chunk-eb715188":1};a[e]?t.push(a[e]):0!==a[e]&&c[e]&&t.push(a[e]=new Promise((function(t,c){for(var n="css/"+({}[e]||e)+"."+{"chunk-15e70942":"184bba2f","chunk-2d0c80c2":"31d6cfe0","chunk-2d0d6f02":"31d6cfe0","chunk-2d20f8d6":"31d6cfe0","chunk-8c79ba7e":"31d6cfe0","chunk-eb715188":"b362790f"}[e]+".css",o=s.p+n,r=document.getElementsByTagName("link"),l=0;l<r.length;l++){var i=r[l],u=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(u===n||u===o))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){i=d[l],u=i.getAttribute("data-href");if(u===n||u===o)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var n=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete a[e],b.parentNode.removeChild(b),c(r)},b.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(b)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,c){n=o[e]=[t,c]}));t.push(n[2]=r);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=l(e);var d=new Error;i=function(t){u.onerror=u.onload=null,clearTimeout(b);var c=o[e];if(0!==c){if(c){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,c[1](d)}o[e]=void 0}};var b=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,c){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(c,n,function(t){return e[t]}.bind(null,n));return c},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var b=u;r.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("56d7")},"0537":function(e,t,c){},"168c":function(e,t,c){},"1c22":function(e,t,c){"use strict";c("0537")},"272b":function(e,t,c){},"312c":function(e,t,c){"use strict";c("c494")},4598:function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));c("14d9");var n=c("be92"),a=c("cee4"),o=c("7a23");const r=Object(n["b"])("userRole",()=>{const e=Object(o["ref"])("guest"),t=t=>{e.value=t.toLowerCase()},c=()=>e.value,n=()=>{e.value=null,localStorage.removeItem("userRole")};return{userRole:e,setUserRole:t,getUserRole:c,removeUserRole:n}});var l=c("a3be"),s=c("6605");const i=Object(n["b"])("LoginStore",()=>{const e=r(),t=Object(o["ref"])(!1),c=Object(o["reactive"])({});let n=Object(o["ref"])(!0),i=Object(o["reactive"])({refreshToken:!1,accessToken:!1});const u=Object(o["ref"])(!1),d=({email:e,password:t})=>{c.email=e,c.password=t},b=()=>{n.value=!1},p=async e=>{!0===e&&await w(),u.value=!u.value},f=()=>{var e;return(null===(e=JSON.parse(sessionStorage.getItem("token")))||void 0===e?void 0:e.refreshToken)||!1},m=()=>{var e;return(null===(e=JSON.parse(sessionStorage.getItem("token")))||void 0===e?void 0:e.accessToken)||!1},O=()=>i.refreshToken,j=()=>i.accessToken,h=()=>t.value=!t.value,v=e=>{"modal-overlay"===e.target.id&&h()},k=()=>{i.accessToken=!1,i.refreshToken=!1,sessionStorage.removeItem("token"),e.removeUserRole()},_=e=>{sessionStorage.setItem("token",JSON.stringify(e))},g=e=>{i.accessToken=e.accessToken,i.refreshToken=e.refreshToken},y=async()=>{try{const t=await a["a"].post(`${l["a"]}/${l["b"]}`,{email:c.email,password:c.password});if(200===t.status){h(),i.accessToken=t.data.accessToken,i.refreshToken=t.data.refreshToken,_(i);const c=Object(s["d"])(),n=t.data.role.toLocaleLowerCase();if(e.setUserRole(t.data.role),"admin"===n||"author"===n)return void await c.push({path:"/admin/dashboard"});await c.push({path:"/articles"})}}catch(t){console.log(t)}},w=async()=>{if(i.accessToken)try{const c=await a["a"].post(`${l["a"]}/${l["c"]}`,{},{headers:{Authorization:"Bearer "+i.refreshToken}});200===c.status&&(k(),e.removeUserRole(),t.value=!1)}catch(c){console.log(c)}};return{isLoginPageShow:t,showLoginPage:h,loginAction:y,formData:c,closeModalOutside:v,token:i,logout:w,acceptAction:p,acceptWindowShow:u,updateFormDataFromRegister:d,isUserDataLoading:n,setStorageToken:_,getRefreshToken:O,getAccessToken:j,getAccessTokenStorage:m,getRefreshTokenStorage:f,setStateToken:g,disableLoader:b}})},4955:function(e,t,c){e.exports=c.p+"img/battlefield-v.475ab307.jpg"},"56d7":function(e,t,c){"use strict";c.r(t);c("ab8b");var n=c("7a23"),a=c("4955"),o=c.n(a),r=c("4598");const l=e=>(Object(n["pushScopeId"])("data-v-515cb777"),e=e(),Object(n["popScopeId"])(),e),s={class:"container"},i={class:"center"},u=["type"],d=l(()=>Object(n["createElementVNode"])("svg",{width:"180px",height:"60px",viewBox:"0 0 180 60",class:"border"},[Object(n["createElementVNode"])("polyline",{points:"179,1 179,59 1,59 1,1 179,1",class:"bg-line"}),Object(n["createElementVNode"])("polyline",{points:"179,1 179,59 1,59 1,1 179,1",class:"hl-line"})],-1));var b={__name:"ButtonBorderAnimate",props:{btnColor:{type:String,default:"transparent"},btnType:{type:String,default:()=>"button"},btnTextColor:{type:String,default:()=>"#fff"},btnText:{type:String,default:"нажми на меня"}},setup(e){return(t,c)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",s,[Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("button",{class:"btn",type:e.btnType,style:Object(n["normalizeStyle"])({background:e.btnColor})},[d,Object(n["createElementVNode"])("span",{style:Object(n["normalizeStyle"])({color:e.btnTextColor})},Object(n["toDisplayString"])(e.btnText),5)],12,u)])]))}},p=(c("312c"),c("6b0d")),f=c.n(p);const m=f()(b,[["__scopeId","data-v-515cb777"]]);var O=m,j=c("7bb1"),h=c("42e9");const v=Object(h["a"])({email:Object(h["b"])().required("не заполненно").email("Email не валиден"),password:Object(h["b"])().required("Пароль не заполнен").min(6,"Пароль должен быть минимум 6 символов")}),k=e=>(Object(n["pushScopeId"])("data-v-f4fd9ba6"),e=e(),Object(n["popScopeId"])(),e),_=k(()=>Object(n["createElementVNode"])("h5",{class:"form__title main-title"},null,-1)),g={class:"form__input-wrapper"},y={class:"form__input__sub-wrap"},w=k(()=>Object(n["createElementVNode"])("span",{class:"form__input-name"},"Email",-1)),N={class:"form__label"},V={class:"form__input-wrapper"},E={class:"form__input__sub-wrap"},T=k(()=>Object(n["createElementVNode"])("span",{class:"form__input-name"},"Пароль",-1)),S={class:"form__label"},B={class:"form__link-wrapper"};var C={__name:"LoginForm",setup(e){const t=Object(r["a"])();return(e,c)=>{const a=Object(n["resolveComponent"])("NuxtLink");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"form__wrapper",id:"modal-overlay",onClick:c[2]||(c[2]=e=>Object(n["unref"])(t).closeModalOutside(e))},[Object(n["createVNode"])(Object(n["unref"])(j["c"]),{class:"form__main",onSubmit:Object(n["unref"])(t).loginAction,"validation-schema":Object(n["unref"])(v)},{default:Object(n["withCtx"])(({meta:e})=>[_,Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("div",y,[w,Object(n["createElementVNode"])("label",N,[Object(n["createVNode"])(Object(n["unref"])(j["b"]),{modelValue:Object(n["unref"])(t).formData.email,"onUpdate:modelValue":c[0]||(c[0]=e=>Object(n["unref"])(t).formData.email=e),modelModifiers:{trim:!0},type:"email",name:"email",class:Object(n["normalizeClass"])(["form__input",{"validate-success":e.valid&&e.touched}]),placeholder:"Введите email"},null,8,["modelValue","class"])])]),Object(n["createVNode"])(Object(n["unref"])(j["a"]),{class:"form__input-error",name:"email"})]),Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",E,[T,Object(n["createElementVNode"])("label",S,[Object(n["createVNode"])(Object(n["unref"])(j["b"]),{modelValue:Object(n["unref"])(t).formData.password,"onUpdate:modelValue":c[1]||(c[1]=e=>Object(n["unref"])(t).formData.password=e),modelModifiers:{trim:!0},type:"password",name:"password",class:Object(n["normalizeClass"])(["form__input",{"validate-success":e.valid&&e.touched}]),placeholder:"Введите пароль"},null,8,["modelValue","class"])])]),Object(n["createVNode"])(Object(n["unref"])(j["a"]),{class:"form__input-error",name:"password"})]),Object(n["createVNode"])(O,{btnText:"Войти",btnType:"submit",class:Object(n["normalizeClass"])(["form__submit-login",{"btn-animate":e.valid&&e.touched}])},null,8,["class"]),Object(n["createElementVNode"])("span",B,[Object(n["createVNode"])(a,{class:"main-link form__link",to:"#"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("забыли пароль?")]),_:1}),Object(n["createVNode"])(a,{onClick:Object(n["unref"])(t).showLoginPage,class:"main-link form__link",to:"/register"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("регистрация")]),_:1},8,["onClick"])])]),_:1},8,["onSubmit","validation-schema"])])}}};c("e2cf");const x=f()(C,[["__scopeId","data-v-f4fd9ba6"]]);var L=x;const A=e=>(Object(n["pushScopeId"])("data-v-55bbcf71"),e=e(),Object(n["popScopeId"])(),e),I=A(()=>Object(n["createElementVNode"])("span",{class:"loader"},null,-1)),P=[I];function D(e,t,c,a,o,r){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,P)}var R={name:"Loader"};c("f6ae");const U=f()(R,[["render",D],["__scopeId","data-v-55bbcf71"]]);var M=U;const z=e=>(Object(n["pushScopeId"])("data-v-df742002"),e=e(),Object(n["popScopeId"])(),e),$={class:"accept"},F={class:"accept__wrapper"},J=z(()=>Object(n["createElementVNode"])("h5",{class:"mb-2"},"Вы Уверенны?",-1));var q={__name:"AcceptForm",props:["acceptAction"],setup(e){return(t,c)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",$,[Object(n["createElementVNode"])("div",F,[J,Object(n["createElementVNode"])("button",{onClick:c[0]||(c[0]=t=>e.acceptAction(!0)),class:"accept__btn btn btn-primary mb-2"}," Выйти "),Object(n["createElementVNode"])("button",{onClick:c[1]||(c[1]=t=>e.acceptAction(!1)),class:"accept__btn btn btn-primary"}," Отмена ")])]))}};c("99b7");const W=f()(q,[["__scopeId","data-v-df742002"]]);var G=W;const H={class:"header__root line"},K={class:"container"},Q={class:"header"},Y=Object(n["createElementVNode"])("div",{class:"header__logo logo hui"},"MY GameBLoG",-1),X={class:"nav"},Z={class:"nav__list"},ee={class:"nav__item"},te={class:"nav__item"},ce={class:"nav__item"},ne={class:"nav__item"},ae={key:0,class:"nav__item item-login"},oe={key:1,class:"nav__item item-login"};var re={__name:"TheHeader",setup(e){const t=Object(r["a"])();return Object(n["onMounted"])(()=>{t.disableLoader()}),(e,c)=>{const a=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",H,[Object(n["createElementVNode"])("div",K,[Object(n["createElementVNode"])("header",Q,[Y,Object(n["createElementVNode"])("nav",X,[Object(n["createElementVNode"])("ul",Z,[Object(n["createElementVNode"])("li",ee,[Object(n["createVNode"])(a,{class:"btn main-link",to:"/"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Статьи")]),_:1})]),Object(n["createElementVNode"])("li",te,[Object(n["createVNode"])(a,{class:"btn main-link",to:"/about"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("О нас")]),_:1})]),Object(n["createElementVNode"])("li",ce,[Object(n["createVNode"])(a,{class:"btn main-link",to:"/join"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Стать автором")]),_:1})]),Object(n["createElementVNode"])("li",ne,[Object(n["createVNode"])(a,{class:"btn main-link",to:"/profile"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Профиль")]),_:1})]),Object(n["unref"])(t).token.accessToken?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",oe,[Object(n["unref"])(t).isUserDataLoading?(Object(n["openBlock"])(),Object(n["createBlock"])(M,{key:0})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:1,class:"btn main-link",onClick:c[1]||(c[1]=(...e)=>Object(n["unref"])(t).acceptAction&&Object(n["unref"])(t).acceptAction(...e))}," Выйти ")),Object(n["unref"])(t).acceptWindowShow?(Object(n["openBlock"])(),Object(n["createBlock"])(G,{key:2,acceptAction:Object(n["unref"])(t).acceptAction},null,8,["acceptAction"])):Object(n["createCommentVNode"])("",!0)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",ae,[Object(n["unref"])(t).isUserDataLoading?(Object(n["openBlock"])(),Object(n["createBlock"])(M,{key:0})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:1,class:"btn main-link",onClick:c[0]||(c[0]=(...e)=>Object(n["unref"])(t).showLoginPage&&Object(n["unref"])(t).showLoginPage(...e))}," Войти "))]))])])])])])}}};c("1c22");const le=re;var se=le;const ie={class:"container"},ue=Object(n["createStaticVNode"])('<footer class="footer fixed-footer"><div class="center"><div id="social-test"><ul class="social"><li><i class="fa fa-facebook" aria-hidden="true"></i></li><li><i class="fa fa-twitter" aria-hidden="true"></i></li><li><i class="fa fa-instagram" aria-hidden="true"></i></li><li><i class="fa fa-vimeo" aria-hidden="true"></i></li><li><i class="fa fa-behance" aria-hidden="true"></i></li><li><i class="fa fa-dribbble" aria-hidden="true"></i></li><li><i class="fa fa-github" aria-hidden="true"></i></li><li><i class="fa fa-pied-piper" aria-hidden="true"></i></li></ul></div></div></footer>',1),de=[ue];function be(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ie,de)}c("bd07");const pe={},fe=f()(pe,[["render",be]]);var me=fe;const Oe={class:"page-wrapper"},je=Object(n["createElementVNode"])("img",{class:"bg-page",src:o.a,alt:"обои"},null,-1),he={class:"wrapper-content"},ve={class:"container"},ke={class:"main my-4"};var _e={__name:"DefaultLayout",setup(e){const t=Object(r["a"])();return(e,c)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("div",Oe,[je,Object(n["createElementVNode"])("div",he,[Object(n["createVNode"])(se),Object(n["createElementVNode"])("div",ve,[Object(n["createElementVNode"])("main",ke,[Object(n["renderSlot"])(e.$slots,"default"),Object(n["unref"])(t).isLoginPageShow?(Object(n["openBlock"])(),Object(n["createBlock"])(L,{key:0})):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(me)])])]))}};c("5a63");const ge=_e;var ye=ge,we=c("f6b4"),Ne=c.n(we),Ve=c("7881"),Ee=c("6605"),Te=c("be92"),Se={__name:"App",setup(e){const t=Object(Ve["a"])(),c=Object(Ee["c"])(),{layout:a}=Object(Te["c"])(t),o=Object(n["computed"])(()=>"admin"===a.value&&c.path.startsWith("/admin")?Ne.a:ye);return Object(n["watch"])(a.value,e=>{console.log(e),t.switchLayout(e)}),(e,t)=>{const c=Object(n["resolveComponent"])("router-view");return Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(Object(n["unref"])(o)),null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c)]),_:1})}}};const Be=Se;var Ce=Be,xe=c("cee4"),Le=c("130e");const Ae=[{path:"/",name:"index",component:()=>c.e("chunk-15e70942").then(c.bind(null,"1e4b"))},{path:"/about",name:"about",component:()=>c.e("chunk-2d0d6f02").then(c.bind(null,"754b"))},{path:"/profile",name:"profile",component:()=>c.e("chunk-2d20f8d6").then(c.bind(null,"b3b1"))},{path:"/register",name:"register",component:()=>c.e("chunk-eb715188").then(c.bind(null,"7803"))},{path:"/join",name:"join",component:()=>c.e("chunk-2d0c80c2").then(c.bind(null,"52e4"))},{path:"/admin/dashboard",name:"dashboard",component:()=>c.e("chunk-8c79ba7e").then(c.bind(null,"9a1c"))}],Ie=Object(Ee["a"])({history:Object(Ee["b"])("/"),routes:Ae});var Pe=Ie;c("4989");window.$=window.jQuery=c("1157");const De=Object(Te["a"])();Object(n["createApp"])(Ce).use(Pe).use(Le["a"],xe["a"]).use(De).mount("#app")},"5a63":function(e,t,c){"use strict";c("bf22")},7657:function(e,t,c){},7881:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));var n=c("be92"),a=c("7a23");const o=Object(n["b"])("layoutStore",()=>{const e=Object(a["ref"])("default"),t=t=>{e.value=t};return{layout:e,switchLayout:t}})},"918d":function(e,t,c){},"99b7":function(e,t,c){"use strict";c("7657")},a3be:function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"d",(function(){return a})),c.d(t,"b",(function(){return o})),c.d(t,"c",(function(){return r}));const n="http://localhost:80",a="register",o="login",r="logout"},bd07:function(e,t,c){"use strict";c("168c")},bf22:function(e,t,c){},c494:function(e,t,c){},e2cf:function(e,t,c){"use strict";c("918d")},f6ae:function(e,t,c){"use strict";c("272b")},f6b4:function(e,t){}});
//# sourceMappingURL=app.a191abf6.js.map